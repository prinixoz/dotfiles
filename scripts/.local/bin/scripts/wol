#!/bin/bash

# --- CONFIGURATION ---
TARGET_IP="$(cat ~/.config/mac | head -1 | xargs)"            # Your laptop's IP
TARGET_MAC="$(cat ~/.config/mac | tail -1 | xargs)"           # Your laptop's MAC address
SSH_USER="$(cat ~/.config/mac | head -2 | tail -1 | xargs)"   # Your SSH user

echo "Sending Wake-on-LAN magic packet... âœ¨"
wakeonlan $TARGET_MAC

# --- STEP 2: Wait for ping response ---
notify-send "Waiting for $TARGET_IP to wake up... â³"
while ! ping -c 1 $TARGET_IP &> /dev/null; do
    sleep 1
done

# --- STEP 3: Notify it's online ---
notify-send "$TARGET_IP is ONLINE ğŸš€"

# --- STEP 4: SSH into the machine ---
#echo "Connecting via SSH... ğŸ”"
#alacritty -e ssh $SSH_USER@$TARGET_IP
